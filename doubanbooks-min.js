(function(){var e={init:function(e){var t=e.apikey?"&apikey="+e.apikey:"";this.url="https://api.douban.com/v2/book/user/"+e.username+"/collections?count=100"+t+"&callback=?";this.fetch()},template:function(e,t){var n=$("#"+e+"-template").html(),r=$("#db-"+e+"-books"),i=Handlebars.compile(n);$(".loading").hide();r.append(i(t))},fetch:function(){var e=this;$.getJSON(this.url,function(t){t=t.collections;$.map(t,function(t){switch(t.status){case"wish":e.wishBooks=[t];e.template("wish",e.wishBooks);break;case"reading":e.readingBooks=[t];e.template("reading",e.readingBooks);break;case"read":e.readBooks=[t];e.template("read",e.readBooks)}})})}};e.init({username:"cpennlee",apikey:""})})();